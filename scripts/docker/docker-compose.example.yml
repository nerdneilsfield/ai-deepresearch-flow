version: "3.9"

services:
  deploy-local-static:
    image: ghcr.io/nerdneilsfield/deepresearch-flow:deploy-latest
    ports:
      - "8080:8899"
    volumes:
      - ./paper_snapshot.db:/db/papers.db
      - ./paper-static:/static
    environment:
      PAPER_DB_API_BASE: http://127.0.0.1:8000
      PAPER_DB_STATIC_BASE: /static
    # Exposes frontend + API, including MCP streamable (/mcp) and SSE (/mcp-sse).
    profiles: ["local-static"]

  deploy-external-static:
    image: ghcr.io/nerdneilsfield/deepresearch-flow:deploy-latest
    ports:
      - "8080:8899"
    volumes:
      - ./paper_snapshot.db:/db/papers.db
    environment:
      PAPER_DB_API_BASE: http://127.0.0.1:8000
      PAPER_DB_STATIC_BASE: https://static.example.com
    # Exposes frontend + API, including MCP streamable (/mcp) and SSE (/mcp-sse).
    profiles: ["external-static"]
